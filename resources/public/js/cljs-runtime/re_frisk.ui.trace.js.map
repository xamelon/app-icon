{"version":3,"sources":["re_frisk/ui/trace.cljs"],"mappings":"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","names":["re-frisk.ui.trace/sub-colors","re-frisk.ui.trace/subs-count","label","val","color","duration-ms","p__65260","map__65261","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","re-frisk.ui.trace/subs-details","run-count","created-count","disposed-count","subs","render-count","run-duration-ms","created-duration-ms","disposed-duration-ms","render-duration-ms","re-frisk.ui.components.components/scroller","iter__4529__auto__","s__65273","cljs.core/LazySeq","temp__5720__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__65275","cljs.core/chunk-buffer","i__65274","map__65284","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__65272","cljs.core/chunk-rest","map__65290","cljs.core/first","cljs.core/cons","cljs.core/rest","id","op-type","operation","p__65297","map__65299","re-frisk.ui.trace/subs-item","p__65309","map__65310","re-frisk.ui.trace/trace-item","tool-state","cljs.core._EQ_","p__65314","map__65317","selected?","item","_","event","cljs.core.swap_BANG_","cljs.core/assoc","p__65328","map__65329","re-frisk.ui.trace/trace-event-item","name","cljs.core/chunk-first"],"sourcesContent":["(ns re-frisk.ui.trace\n  (:require [re-frisk.ui.components.components :as components]))\n\n(def sub-colors\n  {:sub/run     \"#219653\"\n   :sub/create  \"#9b51e0\"\n   :sub/dispose \"#f2994a\"\n   :render      \"#007CC2\"})\n\n(defn subs-count [label val color duration-ms]\n  [:div {:style {:display :flex :align-items :center :margin-right 10\n                 :flex-direction :column}}\n   label\n   [:div {:style {:display :flex :align-items :center}}\n    [:div {:style {:display       :flex :margin 5 :padding-left 4 :padding-right 4 :background-color color\n                   :border-radius 4 :color :white}}\n     val]\n    duration-ms]])\n\n(defn subs-details [{:keys [duration-ms run-count created-count disposed-count subs render-count\n                            run-duration-ms created-duration-ms disposed-duration-ms render-duration-ms]}]\n  [:div {:style {:display :flex :flex 1 :background-color \"#f3f3f3\" :color \"#444444\"\n                 :padding 8 :flex-direction :column}}\n   [:div {:style {:margin-top 8 :margin-bottom 8}} \"Total time: \" duration-ms]\n   [:div {:style {:display :flex :flex-direction :row :margin-bottom 8}}\n    [subs-count \"Created\" created-count (get sub-colors :sub/create) created-duration-ms]\n    [subs-count \"Run\" run-count (get sub-colors :sub/run) run-duration-ms]\n    [subs-count \"Disposed\" disposed-count (get sub-colors :sub/dispose) disposed-duration-ms]\n    [subs-count \"Render\" render-count (get sub-colors :render) render-duration-ms]]\n   [components/scroller\n    (for [{:keys [id duration-ms op-type operation]} subs]\n      ^{:key (str \"item\" id)}\n      [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n       [:div {:style {:display :flex :min-width 100 :color (get sub-colors op-type)}} (str op-type)]\n       [:div {:style {:display :flex :min-width 100}} (str operation)]\n       [:div duration-ms]])]])\n\n(defn subs-item [{:keys [duration-ms run-count created-count disposed-count render-count]}]\n  [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n   [:div \"subs\"]\n   [:div {:style {:display :flex :flex-direction :row}}\n    duration-ms\n    (when-not (zero? created-count)\n      [:div {:style {:background-color (get sub-colors :sub/create) :margin-left 5}}\n       created-count])\n    [:div {:style {:background-color (get sub-colors :sub/run) :margin-left 5}}\n     run-count]\n    (when-not (zero? disposed-count)\n      [:div {:style {:background-color (get sub-colors :sub/dispose) :margin-left 5}}\n       disposed-count])\n    (when-not (zero? render-count)\n      [:div {:style {:background-color (get sub-colors :render) :margin-left 5}}\n       render-count])]])\n\n(defn trace-item [{:keys [op-type]} tool-state]\n  (when-not (= op-type :re-frame.router/fsm-trigger)\n    (fn [{:keys [selected? op-type] :as item} _]\n      [:a\n       {:href     \"#\"\n        :class    (str \"list-group-item\" (when selected? \" active\"))\n        :style    {:padding           0 :font-size 11 :opacity \"0.7\"\n                   :border-left-width 2 :white-space :pre :width \"100%\"}\n        :on-click (fn [event]\n                    (swap! tool-state assoc :selected-event item)\n                    (.preventDefault event))}\n       (if (= :subs op-type)\n         [subs-item item]\n         [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n          [:div (str op-type)]])])))\n\n(defn trace-event-item [{:keys [name duration-ms]}]\n  [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between :align-items :center}}\n   [:div {:style {:display :flex :overflow :hidden}} name]\n   [:div {:style {:display :flex :font-size 11 :margin-left 5}}\n    duration-ms]])"]}